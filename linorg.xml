<?xml version="1.0"?>
<project name="Linorg" default="compile">
    <target name="setproperties">
        <property name="SRCDIR" value="../../../../src/java/"/>
        <property name="BUILDDIR" value="classes"/>
        <property name="WEBAPPS_LIB" value="../../../../webapps/lib/"/>
    </target>
    <target name="all" depends="setproperties, clean, clobber, compile, jar, run" description="clean, build, jar and run">        
        <echo message="Ant Java Version: ${ant.java.version}"/>
    </target>
    <target name="clean" description="remove intermediate files">
        <delete dir="${BUILDDIR}"/>
        <mkdir dir="${BUILDDIR}"/>
    </target>
    <target name="clobber" depends="clean" description="remove all artifact files">
        <delete file="linorg.jar"/>
    </target>
    <!-- target compile (this is included by build.all) -->
    <target name="compile" description="compile the linorg source code to class files">
        <echo message="Compiling Linorg"/>
        <javac target="1.5" debug="on" srcdir="${SRCDIR}" destdir="${BUILDDIR}" includes="mpi/linorg/**.java">            
             <classpath>
                <fileset dir="${WEBAPPS_LIB}" includes="*.jar"/>
            </classpath>
        </javac>
    </target>
    <target name="jar" depends="compile" description="create a Jar file">
        <jar destfile="linorg.jar">
            <fileset dir="classes" includes="**/*.class"/>
            <fileset dir="${SRCDIR}" includes="mpi/linorg/resources/icons/*.png"/>
            <fileset dir="${SRCDIR}" includes="mpi/linorg/resources/html/Introduction.html"/>            
            <manifest>
                <attribute name="Main-Class" value="mpi.linorg.Linorg"/>
            </manifest>
        </jar>
    </target>
    
    <target name="run" description="run the application">
        <java classname="mpi.linorg.Linorg">
            <classpath>
                <fileset dir="${WEBAPPS_LIB}" includes="*.jar"/>
                <pathelement location="linorg.jar"/>
            </classpath>
        </java>
    </target>  
    
</project>
 
